"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[460],{19742:function(e,n,s){s.d(n,{Z:function(){return p}});var t=s(74165),r=s(15861),a=s(29439),i=s(72791),c=s(31752),o=s(60732),l=s(52425),d=s(28782),u=s(17289),m=s(80184),x=l.Z.TextArea,p=function(e){var n=e.item,s=e.bloggerId,l=e.getCommentsOfPost,p=(0,i.useState)(!1),h=(0,a.Z)(p,2),f=h[0],v=h[1],j=(0,i.useState)(""),Z=(0,a.Z)(j,2),g=Z[0],N=Z[1],_=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.hE.deleteComment(n._id);case 2:0===e.sent.resultCode&&l();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){v(!f),N(f?"":n.text)},C=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.hE.updateComment(g,n._id);case 2:0===e.sent.resultCode?(N(""),l(),v(!f)):console.log("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=s===n.user._id&&!f&&function(e){if(e)return Date.now()-Date.parse(e)<5e5;return!1}(n.createdAt);return(0,m.jsx)("div",{className:"post__comments-commentWrapper",children:(0,m.jsxs)("div",{className:"post-comment",children:[(0,m.jsx)("div",{className:"post-avatar",children:(0,m.jsx)("img",{src:n.user.avatarUrl.small,alt:"ava"})}),(0,m.jsxs)("div",{className:"nameAndText",children:[(0,m.jsxs)("div",{className:"headerOf-comment",children:[n.user.fullName,w&&(0,m.jsxs)("div",{children:[(0,m.jsx)(c.Z,{onClick:y}),(0,m.jsx)(o.Z,{onClick:_})]})]}),f?(0,m.jsx)("div",{className:"input",children:(0,m.jsx)(x,{className:"message__form-textarea",size:"small",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u044f...",autoSize:{minRows:2,maxRows:6},value:g,onChange:function(e){return N(e.target.value)}})}):(0,m.jsx)("span",{children:n.text}),(0,m.jsxs)("div",{className:"footerOf-comment",children:[(0,m.jsx)("span",{children:(0,m.jsx)(d.F,{date:n.updatedAt,showFullDate:!0})}),f&&(0,m.jsxs)("div",{className:"footerOf-comment-options",children:[(0,m.jsx)("span",{onClick:C,children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),(0,m.jsx)("span",{onClick:y,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]})]})]})]})})}},16460:function(e,n,s){s.r(n),s.d(n,{default:function(){return S}});var t=s(1413),r=s(45987),a=s(74165),i=s(15861),c=s(29439),o=s(72791),l=s(24215),d=s(92995),u=s(24825),m=s(57689),x=s(17289),p=s(20195),h=s(78687),f=s(77819),v=s(75270),j=s(19742),Z=s(64209),g=s(27376),N=s(11032),_=s(26002),y=s(37083),C=s(28782),w=s(80184),k=["node","inline","className","children"],S=function(){var e=(0,o.useState)(!1),n=(0,c.Z)(e,2),s=n[0],S=n[1],b=(0,o.useState)(!1),D=(0,c.Z)(b,2),F=(D[0],D[1]),O=(0,o.useState)(void 0),U=(0,c.Z)(O,2),P=U[0],T=U[1],E=(0,o.useState)(void 0),A=(0,c.Z)(E,2),H=A[0],I=A[1],B=(0,o.useRef)(null),M=(0,h.v9)(f.oq),R=(0,m.UO)(),z=(0,m.TH)().state,L=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.Gg.getPostById(R.id);case 2:n=e.sent,T(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.hE.getAllCommentsOfPost(R.id);case 2:n=e.sent,I(n.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){L().then((function(){return G()})).then((function(){var e;(G(),z)&&(null===(e=B.current)||void 0===e||e.scrollToBottom())}))}),[]);var V=function(){S(!s)},W=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(n){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!P){e.next=5;break}return e.next=3,x.hE.writeComment(P._id,n);case 3:0===e.sent.resultCode&&G();case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();if(!P)return(0,w.jsx)("div",{className:"main-spin",children:(0,w.jsx)(y.Z,{size:"large"})});if(s){var q=P.title,K=P.text,$=P.tags,J=P.imageUrl;return(0,w.jsx)(_.Tc,{postHandler:V,currentPost:{title:q,text:K,tags:$,imageUrl:J},id:P._id,getPostById:L})}return(0,w.jsx)(u.LW,{ref:B,children:(0,w.jsxs)("div",{className:"post",children:[(0,w.jsxs)("div",{className:"post__main",children:[P.imageUrl.original?(0,w.jsx)("div",{className:"post__main-headerImg",children:(0,w.jsx)("img",{src:P.imageUrl.original,alt:"image"})}):(0,w.jsx)("div",{}),(0,w.jsxs)("div",{className:"post__main-info",children:[(0,w.jsxs)("div",{className:"post__main-info-author",children:[(0,w.jsxs)("div",{style:{display:"flex"},children:[(0,w.jsx)("div",{className:"post-avatar",children:P.user.avatarUrl?(0,w.jsx)("img",{src:P.user.avatarUrl.small,alt:"User"}):(0,w.jsx)("img",{src:"https://bipbap.ru/wp-content/uploads/2021/07/9-1.jpeg",alt:"User"})}),(0,w.jsxs)("div",{className:"name",children:[(0,w.jsx)("span",{children:P.user.fullName}),(0,w.jsx)("span",{children:(0,w.jsx)(C.F,{date:P.createdAt,showFullDate:!0})})]})]}),M===P.user._id&&(0,w.jsx)(v.Z,{editPost:V,id:P._id,handleTooltipVisibility:function(e){F(e)}})]}),(0,w.jsx)("div",{className:"post__main-info-title",children:(0,w.jsx)("h1",{children:P.title})}),(0,w.jsx)("div",{className:"post__main-info-tags",children:P.tags.map((function(e){return(0,w.jsxs)("span",{children:["#",e]})}))}),(0,w.jsx)("div",{className:"post__main-info-text",children:(0,w.jsx)(p.D,{children:P.text,className:"markdown",components:{code:function(e){e.node;var n=e.inline,s=e.className,a=e.children,i=(0,r.Z)(e,k),c=/language-(\w+)/.exec(s||"");return!n&&c?(0,w.jsx)(Z.Z,(0,t.Z)({children:String(a).replace(/\n$/,""),style:g.Z,customStyle:{backgroundColor:"#2c2f48",borderRadius:"15px"},language:c[1],PreTag:"div"},i)):(0,w.jsx)("code",(0,t.Z)((0,t.Z)({className:s},i),{},{children:a}))}}})}),(0,w.jsxs)("div",{className:"post__main-info-views",children:[(0,w.jsxs)("div",{className:"views",children:[(0,w.jsx)("span",{children:(0,w.jsx)(l.Z,{})}),(0,w.jsx)("span",{children:P.viewsCount})]}),(0,w.jsxs)("div",{className:"comments",children:[(0,w.jsx)("span",{children:(0,w.jsx)(d.Z,{})}),(0,w.jsx)("span",{children:P.commentsCount})]})]})]})]}),(0,w.jsx)("div",{className:"comments-background",children:(0,w.jsxs)("div",{className:"post__comments",children:[(0,w.jsx)("div",{className:"post__comments-explanation",children:(0,w.jsx)("span",{children:"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438"})}),0!==(null===H||void 0===H?void 0:H.length)?null===H||void 0===H?void 0:H.map((function(e){return(0,w.jsx)(j.Z,{item:e,bloggerId:M,getCommentsOfPost:G},e._id)})):(0,w.jsxs)("div",{className:"chat__block-empty",children:[(0,w.jsx)("p",{children:"\u0422\u0443\u0442 \u043f\u043e\u043a\u0430 \u043d\u0438\u043a\u0442\u043e \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u043b."}),(0,w.jsx)("p",{children:"\u0411\u0443\u0434\u044c\u0442\u0435 \u043f\u0435\u0440\u0432\u044b\u043c\u0438!"})]}),(0,w.jsx)(N.IK,{sendComment:W})]})})]})})}},75270:function(e,n,s){s.d(n,{Z:function(){return f}});var t=s(29439),r=s(72791),a=s(50798),i=s(93020),c=s(30501),o=s(67575),l=s(60732),d=s(82622),u=s(35337),m=s(47105),x=s(57689),p=s(68407),h=s(80184),f=function(e){var n=e.editPost,s=e.id,f=e.handleTooltipVisibility,v=(0,r.useState)(!1),j=(0,t.Z)(v,2),Z=j[0],g=j[1],N=(0,r.useState)(!1),_=(0,t.Z)(N,2),y=_[0],C=_[1],w=(0,r.useState)(!1),k=(0,t.Z)(w,2),S=k[0],b=k[1],D=(0,m.T)(),F=(0,x.s0)();(0,r.useEffect)((function(){f(!!(Z||y||S))}),[Z,y,S]);return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"edit",children:[(0,h.jsx)(a.Z,{mouseLeaveDelay:.05,mouseEnterDelay:.3,open:y,onOpenChange:function(e){Z||C(e)},title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u043e\u0441\u0442",children:(0,h.jsx)(c.Z,{onClick:n})}),(0,h.jsx)(a.Z,{mouseLeaveDelay:.05,mouseEnterDelay:.3,open:S,onOpenChange:function(e){Z||b(e)},title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u0442",children:(0,h.jsx)(i.Z,{content:(0,h.jsxs)("div",{className:"popover-options",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)(o.Z,{style:{color:"red"}}),(0,h.jsx)("a",{onClick:function(){(0,p.S)(s,(function(){D((0,u.vd)(s)).then((function(){F("/posts")}))}))},children:"\u0414\u0430"})]}),(0,h.jsxs)("div",{children:[(0,h.jsx)(l.Z,{style:{color:"#39e324"}}),(0,h.jsx)("a",{onClick:function(){g(!1)},children:"\u041d\u0435\u0442"})]})]}),title:"\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u0442?",trigger:"click",open:Z,onOpenChange:function(e){b(!1),g(e)},color:"#2c2f48",overlayClassName:"custom-popover",children:(0,h.jsx)(d.Z,{})})})]})})}},28782:function(e,n,s){s.d(n,{C:function(){return m},F:function(){return x}});var t=s(72791),r=s(45939),a=s(60736),i=s(13478),c=s(11528),o=s(22258),l=s(18324),d=s(80184),u={enGB:a.Z,eo:i.Z,ru:c.Z},m=function(e){var n=e.date,s=Date.parse(n)+108e5;return(0,d.jsxs)(t.Fragment,{children:["\u041e\u043d\u043b\u0430\u0439\u043d ",(0,r.Z)(s,{addSuffix:!0,locale:u.ru})]})},x=function(e){var n,s=e.date,r=e.showFullDate,a=void 0!==r&&r;return n=a?Date.parse(s):Date.parse(s)+108e5,(0,o.Z)(n)?(0,d.jsx)(t.Fragment,{children:(0,l.Z)(n,"\u0421\u0435\u0433\u043e\u0434\u043d\u044f \u0432 HH:mm")}):a?(0,d.jsx)(t.Fragment,{children:(0,l.Z)(n,"d.MM.yyyy \u0432 HH:mm")}):(0,d.jsx)(t.Fragment,{children:(0,l.Z)(n,"d.MM.yyyy")})}}}]);
//# sourceMappingURL=460.7f30058e.chunk.js.map